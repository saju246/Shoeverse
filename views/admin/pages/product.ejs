<%- include('../includes/header') %>

<div class="container mt-4">
  <h1 class="text-center mb-3">Product Management</h1>

  <ul class="list-group">
    <% products.forEach((product, index) => { %>
      <li class="list-group-item mb-3">
        <div class="row align-items-center">
          <div class="col-md-3">
            <img src="<%= product.images && product.images[0] && product.images[0].thumbnailUrl ? product.images[0].thumbnailUrl : 'placeholder-image-url.jpg' %>" alt="Product Image" class="img-fluid rounded">
          </div>
          <div class="col-md-9">
            <h4 class="mb-2">
              <% if (product.title.length > 15) { %>
                <%= product.title.substring(0, 15) + "..." %>
              <% } else { %>
                <%= product.title %>
              <% } %>
            </h4>
            <p class="mb-1"><strong>Category:</strong> <%= product?.categoryName?.categoryName %></p>
            <p class="mb-1"><strong>Description:</strong> <%= product.description %></p>
            <p class="mb-1"><strong>Price:</strong> $<%= product.salePrice %></p>
            <p class="mb-1"><strong>Stock:</strong> <%= product.quantity %></p>
            <p class="mb-1"><strong>Sold:</strong> <%= product.sold %></p>
            <div class="d-flex justify-content-end">
              <a href="/admin/product/editProduct/<%= product._id %>" class="btn btn-primary btn-lg me-2">
                <i class="bi bi-pencil"></i> Edit
              </a>
              <% if (product.isListed) { %>
                <form method="post" action="/admin/product/unlist/<%= product._id %>">
                  <button type="submit" class="btn btn-success btn-lg">
                    <i class="bi bi-check"></i> Unlist
                  </button>
                </form>
              <% } else { %>
                <form method="post" action="/admin/product/list/<%= product._id %>">
                  <button type="submit" class="btn btn-danger btn-lg">
                    <i class="bi bi-x"></i> List
                  </button>
                </form>
              <% } %>
            </div>
          </div>
        </div>
      </li>
    <% }) %>
  </ul>
</div>

<style>
  body {
    background-color: #f8f9fa;
  }

  .container {
    margin-top: 30px;
  }

  .list-group-item {
    border: 1px solid #ddd;
    border-radius: 8px;
    transition: transform 0.2s;
  }

  .list-group-item:hover {
    transform: scale(1.02);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  img {
    max-width: 100%;
    height: auto;
    border-radius: 5px;
  }
</style>

<%- include('../includes/footer') %>
